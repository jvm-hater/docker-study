# 클라우드 컴퓨팅

## 클라우드 컴퓨팅 개요

### 클라우드 컴퓨팅이란?

- 가트너의 정의: 클라우드 컴퓨팅은 인터넷 기술을 이용해서 다수의 사용자에게 하나의 서비스로서 방대한 IT 능력을 제공하는 컴퓨팅 방식
- 그리드 컴퓨팅
    - 가상 네트워크를 이용하여 분산된 컴퓨팅 자원을 공유하도록 하는 기술 방식(인터넷의 유휴 자원을 활용)
- 유틸리티 컴퓨팅
    - 다양한 컴퓨팅 자원에 대한 사용량에 따라 요금을 부과하는 종량제 방식의 기술.
    - 필요할 때 가져다 쓴다는 온-디맨드(on-demand) 컴퓨팅 방식 (기업 중심의 서비스)
- 클라우트 컴퓨팅
    - 기술적으로는 그리드 컴퓨팅을 따르고, 비용적으로는 유틸리티 컴퓨팅을 혼합한 포괄적인 패러다임.
    - 그리드 컴퓨팅, 유틸리티 컴퓨팅을 단순히 합친 것과는 약간 다름. (아래는 그 차이점임.)
        - 기업과 개인이 모두 사용 가능한 서비스.
        - 클라우드 서비스를 제공하는 사업자의 컴퓨팅 자원을 이용.
- 클라우드 컴퓨팅의 특징
    - 주문형 셀프 서비스: 고객이 IT 서비스 제공자의 개입 없이 원하는 시점에 바로 서비스를 사용 가능함.
    - 광대역 네트워크 접근: 각 클라우드 서비스 업체가 제공하는 광대역 네트워크를 이용하여 다양한 클라이언트 플랫폼이 빠르게 접속 가능함.
    - 신속한 탄력성과 확장성: 자동 조정(auto-scaling) 기능을 통해 몇 분 안에 신속한 확장과 축소를 조정할 수 있음.
    - 자원의 공동 관리: 물리적 및 가상화된 자원을 풀(pool)로 관리하며, 탄력적으로 사용자 요구에 따라 동적으로 할당 또는 재할당함.
    - 측정 가능한 서비스: 자원 사용량이 실시간으로 수집되는 요금 산정 기능을 통해 비용이 발생함.

### 클라우드 컴퓨팅 구조

![Untitled](https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fd7df39b3-2e99-4fc5-aa59-87b3d202cfca%2FUntitled.png?table=block&id=27aabd18-7804-4501-bdd8-6592c1c658f4&spaceId=b453bd85-cb15-44b5-bf2e-580aeda8074e&width=2000&userId=80352c12-65a4-4562-9a36-2179ed0dfffb&cache=v2)

- 클라우드 컴퓨팅 구조는 자원 활용과 관련된 물리적 시스템 계층, 가상화 계층, 프로비져닝 계층이 있고, 클라우드 서비스와 관련된 클라우드 서비스 관리 체계 계층, 클라우드 서비스 계층으로 구분한다.
    - 그 위로는 사용자와 관련된 클라우드 접근 계층과 사용자 역할에 따른 연결성 구분을 설정할 수 있다.
- 물리적 시스템 계층
    - 여러 형태의 서버 계열을 활용하여 서버에 탑재된 수평적으로 확장 가능한 스토리지 및 네트워크 등의 물리적 요소를 의미함.
- 가상화 계층
    - 가상화: 물리적 구성은 은폐하고, 가상환경을 여러 개 만들어, 개별 가상머신이 자원을 갖추고 있게 만드는 기술임.
    - 서버, 스토리지, 네트워크 가상화는 민첩성을 제공함.
- 프로비저닝 계층
    - 프로비저닝: IT인프라 자원을 사용자의 니즈에 맞게 할당/배치/배포해서 시스템을 사용할 수 있도록 하는 기술임.
    - IT 서비스 공급자는 클라우드 서버 프로비저닝 또는 프로비저닝 해제를 신속히 수행하여 서비스 사용자의 요구를 충족하게 됨. (신속히 수행히 가능한 이유는 가상화 계층이 존재하기 때문임.)
- 클라우드 서비스 관리 체계 계층
    - 물리적 시스템 계층에서 제공되는 자원에 대한 전반적인 라이프 사이클 관리와 모니터링을 지원함.
- 클라우드 서비스 계층
    - 클라우드 구성 요소가 서비스로서 제공되는 확장 가능한 컴퓨팅 자원을 사용한 양에 따라 비용을 지불하며, 클라우드 환경에 있는 모든 자원에 인터넷과 모바일을 통해 언제든 접근할 수 있음.
    - IaaS, PaaS, SaaS, DaaS, SecaaS, …
- 이후 사용자는 주어진 역할(사용자, 관리자, 파트너 등)에 따라 웹 애플리케이션 프로그램 인터페이스( (RESTful HTTP, XML, SOAP, …)를 통해 클라우드 서비스를 호출할 수 있음.

### 클라우드 컴퓨팅 제공 방식과 클라우드 서비스 종류

**클라우드 컴퓨팅 제공 방식**

- 온프레미스
    - 자체 데이터 및 솔루션 등을 저장하기 위해 자사에 데이터 센터를 구축하여 IT 서비스를 수행하는 방식.
    - 한 마디로 필요한 모든 자원을 스스로 가지고 있어야 함.
    - 일반적으로 투자 비용이 큼.
- 클라우드 서비스
    - 언제 어디서나 별도의 소프트웨어 등을 설치하지 않고 인터넷 접속을 통해 저장해 놓은 데이터에 접근하여 사용할 수 있는 서비스임.
    - 사용한 만큼 요금을 지불하므로 필요에 따라 민첩하고 탄력적으로 사용할 수 있음. (항상 클라우드 서비스가 온프레미스보다 비용이 저렴한 것은 아님.)
- 퍼블릭 클라우드
    - 인터넷을 통해 다수의 사용자에게 서버 및 스토리지 등의 클라우드 자원을 AWS, GCP, Azure와 같은 클라우드 서비스 공급자로부터 제공받는 방식.
    - 유틸리티 컴퓨팅 방식을 사용하며, 대표적인 서비스로 IaaS, PaaS, SaaS가 있음.
    - 사용자 및 그룹 단위로 권한 관리를 통해 서비스 격리를 하므로 사용자 간의 간섭이 발생하지 않음.
- 프라이빗 클라우드
    - 제한된 네트워크에서 특정 사용자나 기업만을 대상으로 하는 클라우드 서비스 방식.
    - 인터넷이 아닌 인트라넷 방식(내부 개인 인증 및 VPN 등)으로 서비스에 접근하므로 보안이 높음.
- 하이브리드 클라우드
    - 퍼블릭 클라우드 + 프라이빗 클라우드
    - 일반 업무 데이터 처리 같은 보안 요구 사항이 낮은 작업은 퍼블릭 클라우드를 사용하고, 그렇지 않은 작업은 프라이빗 클라우드를 사용함.

**클라우드 서비스의 종류**

![Untitled](https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F2c9fd951-4867-41bf-b8ce-81b4a156691d%2FUntitled.png?table=block&id=d254be2d-9cb5-4d98-ac11-c4c83a9efef4&spaceId=b453bd85-cb15-44b5-bf2e-580aeda8074e&width=2000&userId=80352c12-65a4-4562-9a36-2179ed0dfffb&cache=v2)

- 서비스로서의 인프라스트럭처 (IaaS)
    - 서버, 스토리지, 네트워크와 같은 인프라 하드웨어 자원을 가상화하여 사용자 요구에 따라 인프라 자원을 사용할 수 있게 제공하는 클라우드 서비스 방식임.
    - IaaS에서는 하드웨어와 가상화를 클라우드에서 제공하고 나머지는 사용자가 알아서 설정함.
- 서비스로서의 플랫폼 (PaaS)
    - 서비스 개발자가 애플리케이션 개발, 실행, 관리 등을 할 수 있도록 안정적인 플랫폼(환경) 또는 프레임워크를 제공하는 클라우드 서비스 방식임.
    - 개발자가 서비스 개발을 위한 복잡한 설치 과정이나 환경 설정을 하지 않고, 완성된 개발 소스만 제공하면 바로 서비스를 올릴 수 있는 플랫폼 서비스임.
    - PaaS에서는 IaaS가 제공하는 자원에 더해 운영체제, 웹 서버(미들웨어), 프레임워크 서비스 및 런타임 서비스 개발 환경을 클라우드에서 제공함.
- 서비스로서의 소프트웨어 (SaaS)
    - 소프트웨어 사용자가 자신의 컴퓨터에 소프트웨어를 설치하지 않고 인터넷을 통해 클라우드에 접속하여 클라우드 기반 소프트웨어의 기능을 사용할 수 있게 해 주는 클라우드 서비스 방식임.
    - 대표적으로 이메일, 구글 앱 서비스 등이 있음.

## 컨테이너 기술과 도커

### 가상 머신과 컨테이너

![Untitled](https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F09bf0f58-01f5-4475-a2d1-c8f32d99301d%2FUntitled.png?table=block&id=c80c0ead-c5e8-4e28-87ba-abfd7c479f91&spaceId=b453bd85-cb15-44b5-bf2e-580aeda8074e&width=2000&userId=80352c12-65a4-4562-9a36-2179ed0dfffb&cache=v2)

- 클라우드 컴퓨팅에서 가상화는 하드웨어 기능을 시뮬레이션하여 애플리케이션 서버, 스토리지, 네트워크와 같은 IT 서비스를 생성하는 소프트웨어 아키텍처 기술임.
- 최근 가상화는 하이퍼바이저를 이용한 가상 머신과 컨테이너를 이용한 도커 방식을 사용함.
- 가상 머신
    - 호스트 운영 체제 위에 가상화 소프트웨어를 이용하여 여러 개의 게스트 OS를 구동하는 방식임.
    - 하이퍼바이저는 가상 머신을 생성하고 실행하는 역할과 가상화된 하드웨어와 각각의 가상 머신을 모니터링하는 중간 관리자임.
    - 대표적인 가상화 프로그램(가상 머신)인 VMWare, VirtualBox 등이 게스트 OS가 사용할 수 있는 물리적 공간을 격리하는 기술임.
    - 각각의 게스트 OS는 호스트 OS로부터 독립된 자원을 할당받아 가상화된 서비스를 제공하므로 수 기가바이트 용량을 차지하는 이미지를 만들어 사용함.
    - 가상 머신은 하드웨어 가상화임.
- 컨테이너
    - 컨테이너는 특정 대상을 격리하는 공간임.
    - 컨테이너 가상화는 리눅스 기반의 물리적 공간 격리가 아닌 프로세스 격리를 통해 경량의 이미지를 실행하고 서비스할 수 있도록 함.
    - 컨테이너 가상화는 프로세스 가상화에 해당하며, 본래 리눅스 자체 기술인 chroot, 네임스페이스, cgroup을 사용함. (아래 3가지 기술을 조합한 리눅스 컨테이너가 존재함.)
        - chroot: 특정 디렉터리를 최상위 디렉터리 root로 인식하게끔 설정하는 리눅스 명령
        - 네임스페이스: 프로세스 자원을 관리하는 기능으로, mnt, pid, net, ipc, user 등의 자원을 그룹화하여 할당하는 기능
        - cgroup: CPU, 메모리, 디스크 I/O, 네트워크 등의 자원 사용량 제어를 통해 특정 애플리케이션의 과도한 자원 사용을 제한하는 기능
    - 컨테이너 엔진인 도커와 오케스트레이션 도구인 쿠버네티스는 호스트 OS의 커널을 공유하고 그 위에 실행 파일 및 라이브러리, 기타 구성 파일 등을 이미지로 빌드하여 패키지로 배포함. (게스트 OS 없음.)

### 도커

- 컨테이너는 코드와 모든 종속성을 패키지화하는 표준 소프트웨어 단위.
- 도커 컨테이너 이미지는 애플리케이션을 실행하는 데 필요한 모든 것(코드, 런타임, 라이브러리 등)을 포함하는 경량의 독립형 실행 가능 소프트웨어 패키지.
- 도커의 주요 기능
    - LXC(리눅스 컨테이너)를 이용한 컨테이너 구동
    - 통합 Buildkit
        - BuildKit은 도커 파일의 설정 정보를 이용하여 도커 이미지를 빌드하는 오픈 소스 도구임.
    - 도커 CLI 기능
- 도커를 사용하기 위해서는 도커 엔진이 설치되어 있어야하고, 이미지 업로드/다운로드가 가능한 도커 허브를 접근할 수 있어야 함.
    - 도커 엔진은 도커를 이용한 애플리케이션 실행 환경 제공을 위한 핵심 요소라고 보면 됨.
- 도커 컨테이너 기술은 PaaS 서비스라고 볼 수 있음. (아래 기능을 클라우드에서 제공함.)
    - 컨테이너를 통한 서비스
        - 컨테이너로 구동되는 애플리케이션.
        - LXC / Docker 기술
    - 컨테이너 자동 관리 도구
        - 오케스트레이션 도구

## 쿠버네티스

- 도커는 컨테이너화된 애플리케이션을 패키징하고 배포하기 위한 공개 표준을 제공했으나, 수많은 컨테이너를 관리하는 것은 어려움이 있음.
    - 애플리케이션 컨테이너 간의 네트워킹 방식, 컨테이너 인스턴스 확장 등
- 컨테이너 오케스트레이션 도구 중 가장 많이 쓰이는 것이 바로 쿠버네티스(k8s)임.
    - 컨테이너 오케스트레이션 도구: 다양한 머신을 하나의 클러스터로 결합하여 오케스트라의 연주자처럼 서로 다른 각자의 역할을 쉽게 조정하고 관리할 수 있도록 설계된 소프트웨어.
    - 쿠버네티스는 대규모 클러스터 환경의 수많은 컨테이너를 쉽고 빠르게 확장, 배포, 관리하는 작업을 자동화해 줌.
- 쿠버네티스의 용도
    - 온프로미스 환경에서수행하는 서버 업그레이드, 패치, 백업 등의 작업을 자동화할 수 있음.
    - 컨테이너 장애 발생 시 자가 회복 기능을 통해 곧바로 복제 컨테이너를 생성하여 서비스를 지속할 수 있음.
    - 스토리지 오케스트레이션할 수 있음.
